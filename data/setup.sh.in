#!/bin/sh

prefix=@prefix@
datarootdir=@datarootdir@
datadir=@datadir@
package_name=@PACKAGE_NAME@

datadir=${datadir}/${package_name}

confdir="${HOME}/.plow"

echo "runnig ${package_name} setup ..."

if test -d ${confdir}; then
	echo "... ${confdir} already exists"
else
	echo "... creating ${confdir}"
	mkdir -p ${HOME}/.${package_name}
fi
if test -f ${confdir}/plowrc; then
	echo "... ${confdir}/plowrc already exists"
else
	echo "... creating ${confdir}/plowrc"
	cp ${datadir}/plowrc ${confdir}
fi
if test -f ${confdir}/plow.db; then
	echo "... ${confdir}/plow.db already exists"
else 
	echo "... creating ${confdir}/plow.db"
	which sqlite3 &> /dev/null
	if test $? = 1; then
		echo "Error: sqlite3 not found"
		exit 1
	fi
	sqlite3 ${confdir}/plow.db < ${datadir}/plow.struct.no_id.sql
fi
echo ""
echo "You should now edit ${confdir}/plowrc."
echo "Then run '${package_name} -I /path/to/music' to fill the database."
